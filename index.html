```html
<script>
// === Utilidades DOM ===
const $ = (sel, ctx = document) => ctx.querySelector(sel);
const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));
const escapeHtml = (s) =>
  String(s).replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));

// Espera que exista un array global `items` con las propiedades usadas abajo.
// Estructura mÃ­nima esperada por item:
// { tipo, uso, ejemplos, latencia, rendimiento, durabilidad, escalabilidad, coste, desc, icon? }

// === Render: Tarjetas ===
function renderCards(list) {
  const grid = $('#cardsGrid');
  if (!grid) return;

  grid.innerHTML = '';
  list.forEach((item) => {
    const art = document.createElement('article');
    art.className = "card rounded-xl border border-slate-200 bg-white p-4 shadow-sm";
    art.dataset.type = (item.tipo || '').toLowerCase();
    art.dataset.tags = [(item.desc||''), (item.uso||''), (item.ejemplos||''), (item.tipo||'')].join(' ').toLowerCase();

    art.innerHTML = `
      <div class="text-3xl mb-2">${escapeHtml(item.icon || 'ðŸ’¾')}</div>
      <h3 class="font-semibold text-lg">${escapeHtml(item.tipo || '')}</h3>
      <p class="text-sm text-slate-700">${escapeHtml(item.desc || '')}</p>
      <ul class="mt-3 text-sm list-disc ml-5">
        <li><span class="font-medium">Uso:</span> ${escapeHtml(item.uso || '')}</li>
        <li><span class="font-medium">Latencia:</span> ${escapeHtml(item.latencia || '')}</li>
        <li><span class="font-medium">Rendimiento:</span> ${escapeHtml(item.rendimiento || '')}</li>
        <li><span class="font-medium">Coste:</span> ${escapeHtml(item.coste || '')}</li>
        <li><span class="font-medium">Ejemplos:</span> ${escapeHtml(item.ejemplos || '')}</li>
      </ul>
    `;
    grid.appendChild(art);
  });

  const emptyMsg = $('#emptyMsg');
  if (emptyMsg) emptyMsg.classList.toggle('hidden', list.length !== 0);
}

// === Render: Tabla comparativa ===
function renderTabla(list) {
  const tbody = $('#tablaBody');
  if (!tbody) return;

  tbody.innerHTML = '';
  list.forEach((item) => {
    const tr = document.createElement('tr');
    tr.className = "border-t";
    tr.innerHTML = `
      <td class="px-4 py-3">${escapeHtml(item.tipo || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.latencia || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.rendimiento || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.durabilidad || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.escalabilidad || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.coste || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.uso || '')}</td>
      <td class="px-4 py-3">${escapeHtml(item.ejemplos || '')}</td>
    `;
    tbody.appendChild(tr);
  });
}

// === Filtros ===
// Busca elementos con los siguientes IDs/clases si existen en el HTML:
// - #search : <input type="search"> para filtro por texto
// - .filter-type : <input type="checkbox"> para filtrar por tipo (value=tipo en minÃºsculas)
// - #usoSelect : <select> opcional para filtrar por uso (exacto); si no existe, se ignora
function applyFilter() {
  const q = ($('#search')?.value || '').toLowerCase().trim();
  const usoSelect = $('#usoSelect');
  const usoSel = (usoSelect && usoSelect.value) ? usoSelect.value.toLowerCase().trim() : '';
  const checks = $$('.filter-type');
  const activeTypes = new Set(checks.filter(c => c.checked).map(c => c.value.toLowerCase()));

  const filtered = (window.items || []).filter((it) => {
    const tipo = (it.tipo || '').toLowerCase();
    const uso = (it.uso || '').toLowerCase();
    const haystack = [(it.tipo||''), (it.uso||''), (it.desc||''), (it.ejemplos||'')].join(' ').toLowerCase();

    const matchesType = checks.length ? activeTypes.has(tipo) : true;
    const matchesUso = usoSelect ? (!usoSel || uso.includes(usoSel)) : true; // si hay select, coincide por substring; si no, ignora
    const matchesText = !q || haystack.includes(q);

    return matchesType && matchesUso && matchesText;
  });

  renderCards(filtered);
  renderTabla(filtered);

  const emptyMsg = $('#emptyMsg');
  if (emptyMsg) emptyMsg.classList.toggle('hidden', filtered.length !== 0);
}

// Construye dinÃ¡micamente los checkboxes de tipo si existe el contenedor #filters
function buildTypeFilters() {
  const wrap = $('#filters');
  if (!wrap) return;
  wrap.innerHTML = '';

  const tipos = [...new Set((window.items || []).map(i => i.tipo).filter(Boolean))];
  tipos.forEach((t) => {
    const id = 'filter-' + String(t).toLowerCase().replace(/\s+/g, '-');
    const label = document.createElement('label');
    label.className = "inline-flex items-center gap-2";
    label.innerHTML = `
      <input id="${id}" type="checkbox" class="filter-type rounded" value="${escapeHtml(String(t).toLowerCase())}" checked>
      <span>${escapeHtml(t)}</span>
    `;
    wrap.appendChild(label);
  });
}

// (Opcional) Construye un <select id="usoSelect"> con categorÃ­as de uso si existe #usoSelect
function buildUsoSelect() {
  const sel = $('#usoSelect');
  if (!sel) return;
  const usos = [...new Set((window.items || []).map(i => (i.uso || '').trim()).filter(Boolean))];
  sel.innerHTML = `<option value="">Todos los usos</option>` + usos.map(u => `<option value="${escapeHtml(u)}">${escapeHtml(u)}</option>`).join('');
}

// === InicializaciÃ³n ===
function initUI() {
  // Construir filtros si hay contenedores
  buildTypeFilters();
  buildUsoSelect();

  // Render inicial
  renderCards(window.items || []);
  renderTabla(window.items || []);

  // Event listeners
  $('#search')?.addEventListener('input', applyFilter);
  $('#filters')?.addEventListener('change', (e) => {
    if (e.target && e.target.classList.contains('filter-type')) applyFilter();
  });
  $('#usoSelect')?.addEventListener('change', applyFilter);

  // Botones de ayuda si existen
  $('#btnClear')?.addEventListener('click', () => { const s = $('#search'); if (s) s.value = ''; applyFilter(); });
  $('#btnReset')?.addEventListener('click', () => {
    const s = $('#search'); if (s) s.value = '';
    $$('.filter-type').forEach(c => c.checked = true);
    if ($('#usoSelect')) $('#usoSelect').value = '';
    applyFilter();
  });
}

// Lanza la inicializaciÃ³n al cargar el DOM
document.addEventListener('DOMContentLoaded', initUI);
</script>
```
